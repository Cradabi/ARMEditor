Riff файл (предположительно схема)

Каждая цифра - READBUFFER

(RiffFile.EnterNamedSection('ARM’);)

Self.Version
tmp(length of self.name[1])
self.name[1]
tmp(length og self.DBIP[1])
self.DBIP
tmp(length og self.DBAlias[1])
self.DBAlias
self.width
self.height
tmp (не используется)
tmp(не используется)
SchemeBox.DX
SchemeBox.DY
Self.WorkScale
tmp для (Self.BGColor := TColorToMColor(TColor(tmp)))
tmp для (Self.NetColor := TColorToMColor(TColor(tmp)))
Self.BitDepth
OnEnumFullObjectsCount
( RiffFile.ExitNamedOrIndexedSection;)

tmp (кол-во объектов в репе)
НАЧАЛО ЦИКЛА ОБЪЕКТОВ

(RiffFile.EnterIndexedSection(i/tmp/))

CacheObject.Count
tmp? какой-то счетчик:
НАЧАЛО ЦИКЛА ВНУТРИ ОБЪЕКТА

(RiffFile.EnterIndexedSection(j/tmp/);)

если for j=1 to tmp если j=1

ТО 

tmp для (MemoryStream.SetSize(tmp))
MemoryStream.Memory для (CacheObject.Obj.LoadFromStream(MemoryStream)))
КОНЕЦ ТО

RiffFile.ExitNamedOrIndexedSection;

КОНЕЦ ЦИКЛА ВНУТРИ ОБЪЕКТА

Self.DesignCache.PushAsLast(CacheObject); (CacheObject из 24 строчки)

(RiffFile.ExitNamedOrIndexedSection;)

КОНЕЦ ЦИКЛА ОБЪЕКТОВ

(RiffFile.EnterNamedSection('link’))

tmp(кол-во связей)
НАЧАЛО ЦИКЛА СВЯЗЕЙ

(RiffFile.EnterIndexedSection(i/tmp/))

Link.Line.index
Link.Object1.index
Link.Object1.GluePointNumber
Link.Object2.index
Link.Object2.GluePointNumber
(RiffFile.ExitNamedOrIndexedSection;)

КОНЕЦ ЦИКЛА СВЯЗЕЙ

(RiffFile.ExitNamedOrIndexedSection;)

НАЧАЛО TRY

(RiffFile.EnterNamedSection('sect’);)

Self.NextSectionNumber (номер следующей секции)
tmp1 - счетчик секций?
НАЧАЛО ЦИКЛА СЕКЦИЙ

 (почему то тут комменатрий //RiffFile.EnterIndexedSection(i);)

tmp (длина названия секции)
ЕСЛИ больше 0 ТО

Section.Name[1]
КОНЕЦ ЕСЛИ

Section.ID
tmp (кол-во объектов в секции)
НАЧАЛО ЦИКЛА ОБЪЕКТОВ В СЕКЦИИ

tmp2 для (SectionObject.Obj := MObject2d(-tmp2);)
SectionObject.ContactIndex для (Section.Objects.PushAsLast(SectionObject);)
КОНЕЦ ЦИКЛА ОБЪЕКТОВ В СЕКЦИИ

Self.Sections.PushAsLast(Section);

(RiffFile.ExitNamedOrIndexedSection;)

КОНЕЦ TRY

OnEnumScheme := Self;

OnEnumProgressPosition := 0;

Self.Objects.LoadFromFile(RiffFile, 'objs', nil, OnEnumItemForLoadSchemeFile);

(RiffFile.ExitNamedOrIndexedSection;)

НАЧАЛО TRY

ЕСЛИ if RiffFile.EnterNamedSection('extd') = true ТО

Self.FWorkVariable
RiffFile.ExitNamedOrIndexedSection;

КОНЕЦ ЕСЛИ 

КОНЕЦ TRY ( EXCEPT - Self.FWorkVariable := 0;)

НАЧАЛО TRY 

ЕСЛИ if RiffFile.EnterNamedSection('sch2') = true ТО

Self.WindowSize.X
Self.WindowSize.Y
tmpbool
ЕСЛИ tmpbool ТО

tmp для (MS.SetSize(tmp);)
MS.Memory для (BackBitmap.LoadFromStream(MS);)
КОНЕЦ tmpbool ЕСЛИ

Self.PixelsPerInchX
Self.PixelsPerInchY
(RiffFile.ExitNamedOrIndexedSection;)

КОНЕЦ if RiffFile.EnterNamedSection('sch2') = true  ЕСЛИ

КОНЕЦ TRY

НАЧАЛО TRY

RiffFile.EnterNamedSection('font')

ЧТЕНИЕ ШРИФТОВ (пока все равно)

КОНЕЦ TRY

БОЛЬШЕ ЧТЕНИЙ ИЗ ФАЙЛА НЕТ








